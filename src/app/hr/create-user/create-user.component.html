<div>
  <div class="form-header">
    <h1 class="form-title">Add Employee</h1>
    <p class="form-subtitle">Create a new employee profile</p>
  </div>
</div>

<div class="form-container">
  <!-- remove direct (ngSubmit) because weâ€™ll confirm first -->
  <form #form="ngForm" class="employee-form">
    <!-- Employee Name -->
    <div class="form-group">
      <label for="name" class="form-label">Employee Name</label>
      <input
        id="name"
        type="text"
        name="name"
        [(ngModel)]="user.name"
        class="form-input"
        placeholder="Enter employee name"
        required
        minlength="2"
      />
    </div>

    <!-- Manager -->
    <div class="form-group">
      <label for="managerId" class="form-label">Manager</label>
      <select
        id="managerId"
        name="managerId"
        [(ngModel)]="user.managerId"
        class="form-select"
      >
        <option [ngValue]="null">-- No Manager --</option>
        @for (manager of managers; track manager.id) {
          <option [ngValue]="manager.id">{{ manager.name }}</option>
        }
      </select>
    </div>

    <!-- Total Leaves -->
    <div class="form-group">
      <label for="totalCredits" class="form-label">Total Leaves</label>
      <div class="input-wrapper">
        <input
          id="totalCredits"
          type="number"
          name="totalCredits"
          [(ngModel)]="user.totalCredits"
          class="form-input"
          min="0"
          max="365"
          required
        />
        <span class="input-icon">ðŸ“…</span>
      </div>
    </div>

    <!-- Role -->
    <div class="form-group">
      <label for="role" class="form-label">Role</label>
      <select
        id="role"
        name="role"
        [(ngModel)]="user.role"
        class="form-select"
        required
      >
        <option value="" disabled>Select Role</option>
        @for (role of roles; track role.name) {
          <option [value]="role.name">{{ role.name }}</option>
        }
      </select>
    </div>

    <!-- Submit -->
    <div class="form-actions">
      <button
        type="button"
        class="btn-primary"
        [disabled]="form.invalid || isSubmitting"
        (click)="showModal = true"
      >
        {{ isSubmitting ? 'Adding Employee...' : 'Add Employee' }}
      </button>
    </div>
  </form>
</div>

<!-- âœ… Confirmation Modal -->
<app-confirmation-modal
  [isOpen]="showModal"
  title="Confirm Employee Creation"
  message="Are you sure you want to add this employee?"
  confirmText="Add"
  cancelText="Cancel"
  (confirmed)="saveUser()"
  (cancelled)="showModal = false">
</app-confirmation-modal>
