<h2>All Leave Applications</h2>

<div class="leave-card">
<div *ngIf="loading">Loading...</div>

<table *ngIf="!loading && leaves.length > 0" class="leaves-table">
  <thead>
  <tr>
    <th>Employee</th>
    <th>Start Date</th>
    <th>End Date</th>
    <th>Status</th>
    <th>Days</th>
    <th>Remarks</th>
    <th>Actions</th>
  </tr>
  </thead>
  <tbody>
  <tr *ngFor="let leave of leaves">
    <td>{{ leave.employeeName || 'Unknown' }}</td>
    <td>{{ leave.startDate }}</td>
    <td>{{ leave.endDate }}</td>
    <td>{{ leave.status }}</td>
    <td>{{ leave.days }}</td>
    <td>{{ leave.remarks }}</td>
    <td>
      <button (click)="approve(leave.id)" [disabled]="leave.status !== 'PENDING'" class="btn-approve">Approve
      </button>
      <button (click)="reject(leave.id)" [disabled]="leave.status !== 'PENDING'" class="btn-reject"> Reject
      </button>
    </td>
  </tr>
  </tbody>
</table>

<p *ngIf="!loading && leaves.length === 0">No leave applications found.</p>


<!-- Pagination with numbers -->
<div class="pagination" *ngIf="totalPages > 1">
  <button (click)="goToPage(currentPage - 1)" [disabled]="currentPage === 1">
    Prev
  </button>

  <button
    *ngFor="let page of [].constructor(totalPages); let i = index"
    (click)="goToPage(i + 1)"
    [disabled]="currentPage === i + 1"
    [class.active]="currentPage === i + 1"
  >
    {{ i + 1 }}
  </button>

  <button (click)="goToPage(currentPage + 1)" [disabled]="currentPage === totalPages">
    Next
  </button>

</div>
